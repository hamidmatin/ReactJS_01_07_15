<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p id="p1"></p>
    <p id="p2"></p>
    <p id="p3"></p>
    <p id="p4"></p>
    <p id="p5"></p>
    <p id="p6"></p>
    <p id="p7"></p>
    <p id="p8"></p>
    <p id="p9"></p>
    <p id="p10"></p>

    <script>
      class Course {
        #name;
        #duration;
        constructor(name, duration) {
          this.name = name;
          this.duration = duration;
        }
        set name(value) {
          if (value.trim() === '') throw 'NAME_REQUIRED_ERROR';
          this.#name = value;
        }
        get name() {
          return this.#name;
        }

        set duration(value) {
          if (value <= 0) throw 'DURATION_ZERO_ERROR';
          this.#duration = value;
        }
        get duration() {
          return this.#duration;
        }

        get courseInfo() {
          return `${this.name}, duration = ${this.duration}`;
        }
      }

      class Person {
        #firstName;
        #lastName;
        #nationalCode;

        constructor(firstName, lastName, nationalCode) {
          this.firstName = firstName;
          this.lastName = lastName;
          this.nationalCode = nationalCode;
        }

        get firstName() {
          return this.#firstName;
        }
        set firstName(value) {
          if (value.trim() === '') {
            throw 'FIRSTNAME_REQUIRED_ERROR';
          }
          this.#firstName = value;
        }

        get lastName() {
          return this.#lastName;
        }
        set lastName(value) {
          this.#lastName = value;
        }

        get nationalCode() {
          return this.#nationalCode;
        }
        set nationalCode(value) {
          if (value.length !== 10) {
            throw 'NATIONAL_CODE_LENGTH_ERROR';
          }
          this.#nationalCode = value;
        }

        get personInfo() {
          return `${this.firstName} ${this.lastName}, nationa code = ${this.nationalCode}`;
        }
      }

      let p1 = null;
      try {
        p1 = new Person('Shervin', 'Osti', '1232323458');
      } catch (e) {
        switch (e) {
          case 'NATIONAL_CODE_LENGTH_ERROR':
            alert('کد ملی باید 10 رقم باشد');
            break;
          case 'FIRSTNAME_REQUIRED_ERROR':
            alert('نام اجباری است');
            break;
        }
      }

      document.getElementById('p1').innerHTML = p1.personInfo;
      p1.lastName = 'Osati';
      document.getElementById('p2').innerHTML = p1.personInfo;

      /*
        class SuperClass {
          constructor(params){
            ...
          }
        }

        class DerivedClass extends SuperClass {
          constructor(params){
            super(super-class params) => in constructor
          }
        }
      */

      class Student extends Person {
        #learn;
        constructor(firstName, lastName, nationalCode, learn) {
          super(firstName, lastName, nationalCode);
          this.learn = learn;
        }
        get fullName() { 
          return `${this.firstName} ${this.lastName}`;
        }

        get learn() {
          return this.#learn;
        }

        set learn(value) {
          // if (value === undefined || value === null || value === 0 ) {
          if (!value) {
            throw 'LEARN_REQUIRED';
          }
          this.#learn = value;
        }
      }

      const reactCourse = new Course('React JS', 40);

      const s1 = new Student('Behnam', 'Rahimi', '1234567890', reactCourse);

      document.getElementById('p3').innerHTML = `${s1.fullName} learning ${s1.learn.courseInfo}`;

      class Teacher extends Person {
        #teach;
        constructor(firstName, lastName, nationalCode, teach) {
          super(firstName, lastName, nationalCode);
          this.teach = teach;
        }
        get teach() {
          return this.#teach;
        }

        set teach(value) {
          if (!value) {
            throw 'TEACH_REQUIRED';
          }
          this.#teach = value;
        }
      }

      const t1 = new Teacher('Hamidreza', 'Izadi Matin', '9876543210', reactCourse);
      document.getElementById(
        'p4'
      ).innerHTML = `${t1.personInfo}, teaches '${t1.teach.courseInfo}'`;

      /*
        nulish operator ?

        variable = object.property or method()

        if(course !== null || course !== undefined)

        if(course){
          courseName = course.name
        }
        else{
          courseName = null
        }

        courseName = course?.name

        *****
        (1)
        if(course.name){
          courseName = course.Name
        }
        else {
          courseName = 'Course is not defined'
        }

        (2)
        courseName = course.name ? course.name : 'Course is not defined'

        (3)
        courseName = course.name ?? 'Course is not defined'
        


      */
    </script>
  </body>
</html>
